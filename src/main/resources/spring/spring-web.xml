<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"
	xmlns:mvc="http://www.springframework.org/schema/mvc" xmlns:aop="http://www.springframework.org/schema/aop"
	xsi:schemaLocation="http://www.springframework.org/schema/beans
		http://www.springframework.org/schema/beans/spring-beans.xsd
		http://www.springframework.org/schema/context
		http://www.springframework.org/schema/context/spring-context.xsd
		http://www.springframework.org/schema/mvc 
		http://www.springframework.org/schema/mvc/spring-mvc.xsd http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd">


	<!-- 激活组件扫描功能,扫描aop的相关组件组件 -->
	<context:component-scan base-package="com.lk.ofo.aop" />
	<!-- 启动对@AspectJ注解的支持 -->
	<aop:aspectj-autoproxy proxy-target-class="true" />

	<!--简化配置: 1、自动注册DefaultAnnotationHandlerMapping,AnnotationMethodHandlerAdapter 
		2、提供一系列:数据绑定,数字和日期的format,@NumberFormat,@DataTimeFormat,xml,json默认读写支持 -->
	<mvc:annotation-driven />

	<!--静态资源默认servlet配置 1、加入对静态资源的处理:js,css,gif,png 2、允许使用"/"做整体映射 -->
	<mvc:default-servlet-handler />

	<!--配置JSP 显示ViewResolver -->
	<bean
		class="org.springframework.web.servlet.view.InternalResourceViewResolver">
		<property name="viewClass"
			value="org.springframework.web.servlet.view.JstlView" />
		<property name="prefix" value="/WEB-INF/jsp/" />
		<property name="suffix" value=".jsp" />
	</bean>

	<!--扫描web相关的controller -->
	<context:component-scan base-package="com.lk.ofo.web" />
	<context:component-scan base-package="com.lk.ofo.phone" />

	<!--自定义异常捕捉 -->
	<bean class="com.lk.ofo.exception.GlobalExceptionResolver" />

    <!-- 异常解析器 -->
    <!--<bean id="exceptionResolver"-->
          <!--class="org.springframework.web.servlet.handler.SimpleMappingExceptionResolver">-->
        <!--<property name="defaultErrorView">-->
            <!--<value>/common/error</value>-->
        <!--</property>-->

        <!--<property name="exceptionMappings">-->
            <!--<props>-->
                <!--<prop key="java.lang.Exception">/common/error</prop>-->
                <!--<prop key="java.lang.Throwable">/common/error</prop>-->
                <!--<prop key="javax.servlet.ServletException">/common/error</prop>-->
                <!--<prop key="java.lang.RuntimeException">/common/error</prop>-->
                <!--<prop key="java.sql.SQLException">/common/error</prop>-->
            <!--</props>-->
        <!--</property>-->
        <!--<property name="statusCodes">-->
            <!--<props>-->
                <!--<prop key="/common/error">500</prop>-->
                <!--<prop key="/common/error">404</prop>-->
            <!--</props>-->
        <!--</property>-->

        <!--<property name="warnLogCategory">-->
            <!--<value>org.springframework.web.servlet.handler.SimpleMappingExceptionResolver-->
            <!--</value>-->
        <!--</property>-->
    <!--</bean>-->


	<!-- 拦截器 -->
	<mvc:interceptors>
		<!-- 多个拦截器，顺序执行 -->
		<mvc:interceptor>
			<mvc:mapping path="/user/**" />
			<mvc:mapping path="/bicycle/**" />
			<mvc:mapping path="/order/**" />
			<mvc:mapping path="/own/**" />
			<mvc:mapping path="/activity/**" />
			<mvc:mapping path="/map/**" />
            <mvc:mapping path="/message/**" />
			<bean class="com.lk.ofo.interceptor.LoginInterceptor"></bean>
		</mvc:interceptor>
	</mvc:interceptors>

</beans>